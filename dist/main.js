!function(){var t={53:function(t){const s={randomVec(t){const s=2*Math.PI*Math.random();return[Math.sin(s)*t,Math.cos(s)*t]},distance(t,s){return Math.sqrt((t[0]-s[0])**2+(t[1]-s[1])**2)},setMag(t,s){let i=this.distance(t,[0,0]);return[t[0]*(s/i),t[1]*(s/i)]}};t.exports=s}},s={};function i(e){var h=s[e];if(void 0!==h)return h.exports;var o=s[e]={exports:{}};return t[e](o,o.exports,i),o.exports}!function(){"use strict";const t=i(53),s=new Image;s.src="./assets/blackhole2.png";const e=[];for(let t=0;t<=6;t++)e.push(new Image),e[t].src=`./assets/planet${t}.png`;class h{constructor(t){this.pos=t.pos,this.vel=t.vel,this.radius=t.radius,this.game=t.game,this.image=this.getImage()}draw(t,s){if(this instanceof a){let i=this.pos[0]-this.radius*s,e=this.pos[1]-this.radius*s;t.drawImage(this.image,i,e,2*this.radius*s,2*this.radius*s)}else{let s=this.pos[0]-4*this.radius,i=this.pos[1]-4*this.radius;t.drawImage(this.image,s,i,8*this.radius,8*this.radius)}}scaleRadius(t){this.radius*=t}getImage(){if(this instanceof a){let t=Math.floor(7*Math.random());return e[t]}return s}move(){this.pos[0]+=this.vel[0],this.pos[1]+=this.vel[1]}isCollidedWith(s){return t.distance(this.pos,s.pos)<this.radius+s.radius}consumes(t){const s=Math.PI*this.radius**2+Math.PI*t.radius**2;this instanceof a?this.radius=Math.sqrt(s/Math.PI):!(this instanceof a)&&this.radius>80?this.radius=.9*Math.sqrt(s/Math.PI):this instanceof a||(this.radius=Math.sqrt(s/Math.PI))}}const o=i(53);class a extends h{constructor(t){super({pos:t.pos,vel:o.randomVec(.075),radius:t.radius,game:t.game}),this.type=t.type}collideWith(t){this.consumes(t),this.game.remove(t)}}const n=i(53);class r extends h{constructor(t){super({pos:t.pos,vel:[0,0],radius:20,game:t.game}),this.score=0}collideWith(t){this.score+=1,this.consumes(t),this.game.remove(t)}update(t){let s=t.slice();t[0]!==this.pos[0]&&t[1]!==this.pos[1]&&(s[0]-=this.pos[0]+25,s[1]-=this.pos[1]+83,s=n.setMag(s,1),this.pos[0]+s[0]>=0&&this.pos[1]+s[1]>=0&&(this.pos[0]+=s[0],this.pos[1]+=s[1]))}}class c{constructor(){this.time="00:00",this.count=0,this.minutes=0,this.started=!1}startTimer(t){this.started||(this.timerInterval=setInterval((()=>{this.count+=1,this.time=this.refactorTime(this.count)}),1e3)),this.started||(this.started=!0)}refactorTime(t){if(t<60)return t<10?`00:0${t}`:`00:${t}`;{let s=Math.floor(t/60),i=t%60;return s<10&&i<10?`0${s}:0${i}`:s<10&&i>=10?`0${s}:${i}`:s>=10&&i<10?`${s}:0${i}`:`${s}:${i}`}}endTimer(){clearInterval(this.timerInterval)}}const d=new Image;d.src="./assets/background.png";const l=new Image;l.src="./assets/boss1.png";const u=new Image;u.src="./assets/planet1.png";const m=document.getElementById("game-canvas");m.setAttribute("width",window.innerWidth-50),m.setAttribute("height",window.innerHeight-150),m.getContext("2d");const p=[];m.addEventListener("mousemove",(t=>{t.preventDefault(),t.stopPropagation(),p[0]=t.clientX,p[1]=t.clientY}));const g=new class{constructor(t,s){this.canvas=t,this.DIM_X=t.width,this.DIM_Y=t.height,this.ctx=t.getContext("2d"),this.mousePos=s,this.NUM_OBJECTS=15,this.objects=[],this.addObjects(),this.scale=1,this.started=!1,this.running=!0,this.paused=!0,this.registerPause(),this.timer=new c,this.score=0,this.music=document.createElement("audio"),this.music.src="./assets/tunes.mp3",this.music.volume=.1}addObjects(){for(;this.objects.length<this.NUM_OBJECTS;){const t=new a({pos:this.randomPosition(),radius:Math.floor(15*Math.random()+15),game:this,type:"planet"});this.objects.push(t)}const t=new r({pos:[this.DIM_X/2,this.DIM_Y/2],game:this});this.objects.push(t)}randomPosition(){return[Math.random()*this.DIM_X,Math.random()*this.DIM_Y]}draw(t){t.clearRect(0,0,this.DIM_X,this.DIM_Y),t.drawImage(d,0,0,this.DIM_X,this.DIM_Y),this.objects.forEach((s=>{s.draw(t,this.scale)}))}moveObjects(){this.objects.forEach((t=>{t instanceof r||(t.move(),t.pos=this.wrap(t.pos))}))}checkCollisions(){for(let t=1;t<this.objects.length;t++)for(let s=0;s<t;s++)if(this.objects[t].isCollidedWith(this.objects[s])){this.objects[t].radius>=this.objects[s].radius?(this.objects[t]instanceof r&&this.objects[t].radius>80&&(this.scale-=this.scale/(4*this.objects[t].radius),this.scaleHitboxes()),this.objects[t].collideWith(this.objects[s],this.scale)):(this.objects[t]instanceof r&&(this.score=this.objects[t].score,this.running=!1),this.objects[s].collideWith(this.objects[t]));break}}scaleHitboxes(){for(let t=0;t<this.objects.length;t++)this.objects[t].scaleRadius(this.scale)}remove(t){if(this.objects.splice(this.objects.indexOf(t),1),this.objects.length<=5){let t=3;const s=this.objects[this.objects.length-1];for(;t--;){const t=new a({pos:this.randomPosition(),radius:Math.floor(Math.random()*(s.radius-15)+15)*this.scale,game:this,type:"planet"});t.isCollidedWith(s)||this.objects.unshift(t)}}}addBosses(){const t=this.objects.at(-1);"00:45"===this.timer.time?this.objects.filter((t=>"boss"===t.type)).length<1&&this.generateBoss(t,10):"01:30"===this.timer.time?this.objects.filter((t=>"boss"===t.type)).length<1&&(l.src="./assets/boss2.png",this.generateBoss(t,20)):"02:15"===this.timer.time?this.objects.filter((t=>"boss"===t.type)).length<1&&(l.src="./assets/boss3.png",this.generateBoss(t,30)):"03:00"===this.timer.time?this.objects.filter((t=>"boss"===t.type)).length<1&&(l.src="./assets/boss4.png",this.generateBoss(t,40)):"03:45"===this.timer.time&&this.objects.filter((t=>"boss"===t.type)).length<1&&(l.src="./assets/boss5.png",this.generateBoss(t,50))}generateBoss(t,s){const i=new a({pos:this.randomPosition(),radius:t.radius+s,game:this,type:"boss"});i.image=l,this.objects.unshift(i)}step(){this.checkCollisions(),this.moveObjects(),this.addBosses()}start(){const t=this.objects[this.objects.length-1];this.step(),t instanceof r&&t.update(this.mousePos),this.draw(this.ctx),this.addGameDetails(),this.running&&!this.paused&&this.started?(this.timer.startTimer(),this.music.play(),requestAnimationFrame(this.start.bind(this))):this.running?this.paused&&this.started?this.addPausedText():this.started||this.addLandingText():(this.addGameOverText(),this.music.pause(),this.timer.started=!1,this.timer.time="00:00",this.timer.count=0,this.score=0,this.timer.endTimer())}addGameDetails(){this.ctx.font="18px andale mono",this.ctx.fillStyle="yellow",this.ctx.fillText(this.timer.time,this.DIM_X/2-87.5,60),this.ctx.fillText(`SCORE: ${this.objects[this.objects.length-1].score||this.score}`,this.DIM_X/2,60)}addGameOverText(){this.ctx.font="48px andale mono",this.ctx.fillStyle="yellow",this.ctx.fillText("GAME OVER",this.DIM_X/2-130,this.DIM_Y/2),this.ctx.font="18px andale mono",this.ctx.fillStyle="white",this.ctx.fillText(`SCORE: ${this.objects[this.objects.length-1].score||this.score}`,this.DIM_X/2-45,this.DIM_Y/2+40),this.ctx.fillText("Click to Restart",this.DIM_X/2-87.5,this.DIM_Y/2+70)}addPausedText(){this.ctx.font="48px andale mono",this.ctx.fillStyle="yellow",this.ctx.fillText("PAUSED",this.DIM_X/2-82.5,this.DIM_Y/2)}addLandingText(){this.ctx.clearRect(0,0,this.DIM_X,this.DIM_Y),this.ctx.font="48px andale mono",this.ctx.fillStyle="yellow",this.ctx.shadowColor="yellow",this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=10,this.ctx.fillText("CLICK TO START",this.DIM_X/2-204,this.DIM_Y/2-50),this.ctx.font="18px andale mono",this.ctx.fillStyle="white",this.ctx.shadowColor="white",u.onload=()=>{this.ctx.drawImage(u,this.DIM_X/2-250,this.DIM_Y/2+20,50,50)},this.ctx.fillText("Move your mouse around to eat planets",this.DIM_X/2-180,this.DIM_Y/2+50),this.ctx.fillText("Watch out for bosses every 45 seconds",this.DIM_X/2-220,this.DIM_Y/2+100),l.onload=()=>{this.ctx.drawImage(l,this.DIM_X/2+200,this.DIM_Y/2+70,50,50)},this.ctx.fillText("Maintain a balance between growing too big and being too small",this.DIM_X/2-330,this.DIM_Y/2+150),this.ctx.fillText("Click anywhere to pause",this.DIM_X/2-125,this.DIM_Y/2+200)}click(t){this.started||(this.started=!0,this.start()),this.running&&(this.paused=!this.paused,this.savedCount=this.timer.count,this.timer.endTimer(),this.timer.started=!1),this.paused||(this.start(),this.timer.startTimer(this.savedCount)),this.running||this.paused||!this.started||(this.objects=[],this.addObjects(),this.running=!0,this.start())}registerPause(){this.canvas.addEventListener("mousedown",this.click.bind(this))}wrap(t){let s=[t[0],t[1]];return t[0]<0?s[0]=this.DIM_X:t[0]>this.DIM_X&&(s[0]=0),t[1]<0?s[1]=this.DIM_Y:t[1]>this.DIM_Y&&(s[1]=0),s}}(m,p);g.start();const b=document.getElementById("muteButton"),f=document.getElementById("unmuteButton");f.classList.add("hidden"),b.addEventListener("click",(()=>{g.music.volume=0,f.classList.remove("hidden"),b.classList.add("hidden")})),f.addEventListener("click",(()=>{g.music.volume=.1,b.classList.remove("hidden"),f.classList.add("hidden")}))}()}();
//# sourceMappingURL=main.js.map